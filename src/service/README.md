# Example configuration files


## `cosi-site.conf`

Configuration file for init.d scripts, if used, providing customization of the following options:

* `log_dir` location of the site log files, default: `/var/log/circonus/cosi-site` (directory is created if it does not already exist)
* `node_bin` explicitly set path to node binary, if installed in a non-standard location. (e.g. not included in the **PATH** provided to init scripts.) *Note: cosi-site requires node v4+ for certain es6 features.*

**Location**: `/etc/default/cosi-site`


## `cosi-site-config.json`

Configuration file for `cosi-site.js` (the main service app script) providing customization of the following options:

`hostname` the ip the service should listen on for requests, default: `0.0.0.0` (may be ipv4 or ipv6 notation, see [NodeJS server documentation](https://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback))
`port` the port the service should listen on for requests, default: `80` (see [NodeJS server documentation](https://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback))
`package_url` base URL where packages are maintained, default: [http://updates.circonus.net/node-agent/packages/](http://updates.circonus.net/node-agent/packages/)
`package_list_file` valid JSON file containing a list of packages available at `package_url`, default: `./etc/packages.json` (the context is relative to the location of `cosi-site.js`, should be generated by running `bin/fetch-osi-package-list.sh && bin/generate-osi-package-json.py` from the installed location)
`config_dir` location of the supported distribution/version/architecture default configurations are located, default: `./etc/configs`
`log_dir` location where the cosi-site.log should be generated, default: `/var/log/circonus/cosi-site`
`user` user id or name, change to this user after starting (e.g. "nobody"), default: no change

**Location**: `etc/config.json` (e.g. `/opt/circonus/cosi/etc/config.json`)


## `cosi-install.conf`

Configuration file for `cosi-install` script to facilitate automation of installs across a common infrastructure.

`cosi_api_key` **required**
`cosi_broker_id` **required**
`cosi_trace_flag`
`cosi_confirm_flag`
`cosi_url`
`circonus_api_url`
`package_install_command`
`package_install_args`

**Location**: `/etc/default/cosi-install` **on the LOCAL system performing the install, not on the cosi-site system**

# Example service configurations

## `cosi-site.initd.nohup.sh`

**Location**: `/etc/init.d/cosi-site` (enable via: CentOS `chkconfig --add cosi-site && chkconfig cosi-site on`; Ubuntu `update-rc.d cosi-site defaults`)

## SMF

* log `/var/svc/log/application-circonus-cosi-site\:default.log`

---

# to be merged

Options may be set in `etc/config.json`. (see `examples/config.json`)

1. `hostname`, default: "0.0.0.0", all addresses. (use IPv4 or IPv6 notation)
1. `port`, default: 8000.
1. `package_url`, default: *http://updates.circonus.net/node-agent/packages/*
1. `package_list_file`, default `./etc/packages.json`
1. `config_dir`, default `./etc/configs`
1. `log_dir`, default `/var/log/circonus/cosi-site` (set to 'stdout' or '-' for console logging during development/testing)
